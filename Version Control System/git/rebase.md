# Git Rebase

## Rebaseë€?

> ë¸Œëœì¹˜ì˜ ë² ì´ìŠ¤(ì‹œì‘ì )ë¥¼ ë‹¤ë¥¸ ì»¤ë°‹ìœ¼ë¡œ ì˜®ê¸°ëŠ” ê²ƒ

**Merge vs Rebase**

```
# Merge: ë³‘í•© ì»¤ë°‹ ìƒì„±
main:    A---B---C---M
              \     /
feature:       D---E

# Rebase: íˆìŠ¤í† ë¦¬ë¥¼ ì§ì„ ìœ¼ë¡œ
main:    A---B---C
                  \
feature:           D'---E'
```

---

## ê¸°ë³¸ ì‚¬ìš©ë²•

### ë¸Œëœì¹˜ rebase

```bash
# feature ë¸Œëœì¹˜ì—ì„œ
git checkout feature

# mainì˜ ìµœì‹  ì»¤ë°‹ ìœ„ë¡œ rebase
git rebase main

# ë˜ëŠ” í•œ ì¤„ë¡œ
git rebase main feature
```

### rebase í›„ push

```bash
# ì´ë¯¸ pushí•œ ë¸Œëœì¹˜ëŠ” force push í•„ìš”
git push --force-with-lease

# ë˜ëŠ” (ì£¼ì˜: ë” ìœ„í—˜)
git push -f
```

---

## Interactive Rebase (ê°•ë ¥í•œ ê¸°ëŠ¥)

```bash
# ìµœê·¼ Nê°œ ì»¤ë°‹ ìˆ˜ì •
git rebase -i HEAD~3

# íŠ¹ì • ì»¤ë°‹ë¶€í„°
git rebase -i <commit-hash>
```

### ì—ë””í„°ì—ì„œ ì„ íƒ

```
pick abc1234 ì²« ë²ˆì§¸ ì»¤ë°‹
pick def5678 ë‘ ë²ˆì§¸ ì»¤ë°‹
pick ghi9012 ì„¸ ë²ˆì§¸ ì»¤ë°‹

# ëª…ë ¹ì–´:
# p, pick   = ì»¤ë°‹ ì‚¬ìš©
# r, reword = ì»¤ë°‹ ë©”ì‹œì§€ ìˆ˜ì •
# e, edit   = ì»¤ë°‹ ìˆ˜ì •
# s, squash = ì´ì „ ì»¤ë°‹ì— í•©ì¹˜ê¸° (ë©”ì‹œì§€ ìœ ì§€)
# f, fixup  = squashì™€ ë™ì¼ (ë©”ì‹œì§€ ë²„ë¦¼)
# d, drop   = ì»¤ë°‹ ì‚­ì œ
# ìˆœì„œ ë³€ê²½ = ì»¤ë°‹ ìˆœì„œ ë³€ê²½
```

### ìì£¼ ì“°ëŠ” íŒ¨í„´

#### ì»¤ë°‹ í•©ì¹˜ê¸° (squash)

```
# ë³€ê²½ ì „
pick abc1234 feat: ê¸°ëŠ¥ ì¶”ê°€
pick def5678 fix: ì˜¤íƒ€ ìˆ˜ì •
pick ghi9012 fix: ë²„ê·¸ ìˆ˜ì •

# ë³€ê²½ í›„ (í•˜ë‚˜ë¡œ í•©ì¹¨)
pick abc1234 feat: ê¸°ëŠ¥ ì¶”ê°€
squash def5678 fix: ì˜¤íƒ€ ìˆ˜ì •
squash ghi9012 fix: ë²„ê·¸ ìˆ˜ì •
```

#### ì»¤ë°‹ ë©”ì‹œì§€ ìˆ˜ì •

```
# ë³€ê²½ ì „
pick abc1234 ì˜¤íƒ€ìˆëŠ” ë©”ì‹œì§€

# ë³€ê²½ í›„
reword abc1234 ì˜¤íƒ€ìˆëŠ” ë©”ì‹œì§€
```

#### ì»¤ë°‹ ìˆœì„œ ë³€ê²½

```
# ë³€ê²½ ì „
pick abc1234 ì„¸ ë²ˆì§¸ ì‘ì—…
pick def5678 ì²« ë²ˆì§¸ ì‘ì—…
pick ghi9012 ë‘ ë²ˆì§¸ ì‘ì—…

# ë³€ê²½ í›„ (ìˆœì„œ ë³€ê²½)
pick def5678 ì²« ë²ˆì§¸ ì‘ì—…
pick ghi9012 ë‘ ë²ˆì§¸ ì‘ì—…
pick abc1234 ì„¸ ë²ˆì§¸ ì‘ì—…
```

---

## Rebase ì¶©ëŒ í•´ê²°

```bash
# ì¶©ëŒ ë°œìƒ ì‹œ
# 1. ì¶©ëŒ íŒŒì¼ ìˆ˜ì •
# 2. ìŠ¤í…Œì´ì§•
git add <file>

# 3. rebase ê³„ì†
git rebase --continue

# ë˜ëŠ” í˜„ì¬ ì»¤ë°‹ ê±´ë„ˆë›°ê¸°
git rebase --skip

# ë˜ëŠ” rebase ì·¨ì†Œ
git rebase --abort
```

---

## ì‹¤ì „ ì›Œí¬í”Œë¡œìš°

### PR ì „ ì»¤ë°‹ ì •ë¦¬

```bash
# 1. main ìµœì‹ í™”
git checkout main
git pull

# 2. feature ë¸Œëœì¹˜ì—ì„œ rebase
git checkout feature
git rebase main

# 3. ì»¤ë°‹ ì •ë¦¬ (ì„ íƒ)
git rebase -i HEAD~5

# 4. force push
git push --force-with-lease
```

### mainì—ì„œ ìµœì‹  ì½”ë“œ ê°€ì ¸ì˜¤ê¸°

```bash
# feature ë¸Œëœì¹˜ì—ì„œ
git fetch origin
git rebase origin/main

# ì¶©ëŒ í•´ê²° í›„
git push --force-with-lease
```

---

## Rebase vs Merge

| í•­ëª©          | Rebase      | Merge            |
| ------------- | ----------- | ---------------- |
| **íˆìŠ¤í† ë¦¬**  | ì§ì„  (ê¹”ë”) | ë¶„ê¸°/ë³‘í•© (ë³µì¡) |
| **ì»¤ë°‹ í•´ì‹œ** | ë³€ê²½ë¨      | ìœ ì§€ë¨           |
| **ì¶©ëŒ í•´ê²°** | ê° ì»¤ë°‹ë§ˆë‹¤ | í•œ ë²ˆì—          |
| **í˜‘ì—…**      | ì£¼ì˜ í•„ìš”   | ì•ˆì „             |
| **ì›ë³¸ ë³´ì¡´** | âŒ          | âœ…               |

### ì–¸ì œ ì‚¬ìš©?

```
Rebase:
- ë¡œì»¬ ë¸Œëœì¹˜ ì •ë¦¬
- PR ì „ ì»¤ë°‹ ì •ë¦¬
- íˆìŠ¤í† ë¦¬ ê¹”ë”í•˜ê²Œ ìœ ì§€

Merge:
- ê³µìœ ëœ ë¸Œëœì¹˜ (main, develop)
- ì›ë³¸ íˆìŠ¤í† ë¦¬ ë³´ì¡´ í•„ìš”
- ì•ˆì „ì´ ì¤‘ìš”í•œ ê²½ìš°
```

---

## ğŸ¯ Rebase ì²´í¬ë¦¬ìŠ¤íŠ¸

### ì‚¬ìš© ì „

- [ ] ì´ë¯¸ pushí•œ ë¸Œëœì¹˜ì¸ê°€? (ì£¼ì˜ í•„ìš”)
- [ ] ë‹¤ë¥¸ ì‚¬ëŒê³¼ ê³µìœ  ì¤‘ì¸ê°€? (ì‚¬ìš© ê¸ˆì§€)
- [ ] ë°±ì—… í•„ìš”í•œê°€? (ë¸Œëœì¹˜ ë³µì‚¬)

### Interactive Rebase

- [ ] ëª©ì  ëª…í™• (squash, reword, edit)
- [ ] ì¶©ëŒ ëŒ€ë¹„
- [ ] `--abort`ë¡œ ë³µêµ¬ ê°€ëŠ¥ ì¸ì§€

### Push

- [ ] `--force-with-lease` ì‚¬ìš© (forceë³´ë‹¤ ì•ˆì „)
- [ ] íŒ€ì›ì—ê²Œ ì•Œë¦¼ (ê³µìœ  ë¸Œëœì¹˜ì¸ ê²½ìš°)

---

## ì£¼ì˜ì‚¬í•­

- âš ï¸ **ê³µìœ ëœ ë¸Œëœì¹˜ì—ì„œ rebase ê¸ˆì§€** (main, develop)
- âš ï¸ rebaseëŠ” ì»¤ë°‹ í•´ì‹œë¥¼ ë³€ê²½í•¨ â†’ force push í•„ìš”
- âš ï¸ `--force` ëŒ€ì‹  `--force-with-lease` ì‚¬ìš©
- âš ï¸ ì˜ëª»ë˜ë©´ `git reflog`ë¡œ ë³µêµ¬ ê°€ëŠ¥

```bash
# ë³µêµ¬ ë°©ë²•
git reflog
git reset --hard HEAD@{n}
```

---

## ìš”ì•½

```
ë¡œì»¬ ì‘ì—…:
featureì—ì„œ ì‘ì—… â†’ rebase -ië¡œ ì •ë¦¬ â†’ main rebase â†’ PR

Golden Rule:
"ê³µìœ ëœ ë¸Œëœì¹˜ëŠ” rebase í•˜ì§€ ì•ŠëŠ”ë‹¤"
```
